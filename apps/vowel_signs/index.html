<!DOCTYPE html>
<html lang="en-GB">

<head>
<meta charset="utf-8"/>
<title>Consonant-vowel generator</title>
<meta name="description" content="Generate a matrix of consonant+vowel combinations."/>
<script src="../../../shared/phrasedb/db.js"> </script>

<link rel="stylesheet" href="../../../shared/style/docs.css" />
	

<style>
table { font-size: 24px; clear: both; }
th { color: tan; padding-inline-end: .5em; }
th.second { color: tan; }
td { text-align: center; cursor: pointer; border: 1px dotted #aaa; border-radius: .1em; }
#parkingdiv { /*margin-inline-start: 2em;*/ }
#parkingLot { font-size: 28px; border: 0; width: 50%; height: 3em; }
#inputPanel { margin-inline-end: 2em; }
#preview  { font-size: 48px; padding: 0 .2em 0 0; float: right; position: sticky; top: 0; right: 0; background-color: white; clear: both; z-index: 1000; }
#vowels { /*width: 4em;*/ }
#submit { color: #0C3;
font-size: 250%;
border-radius: 10px;
line-height: 1.5em;
padding: 5px;
border: 1px solid #ddd; vertical-align: top; }
#exclusions, #highlights { width: 50%; }
.tips { text-align: start; font-size: 14px; }
.tipBody td, .tipBody th { vertical-align: top; }
.tipHead th { vertical-align: top; text-align: start; }
.highlighted { color: white; background-color: tan; }
</style>




<style id="fontSizeStyling">.text { font-size: 60px; }</style> <!-- this sets the default, but is changed by scripting -->
<style id="fontWhiteSpace">.text { white-space: nowrap; }</style> <!-- this sets the default, but is changed by scripting -->

<script src="../../../shared/code/boilerplate.js"></script>

<script>
</script>

</head>

<body class="app">
<header>
    <div id="header-boilerplate"></div>
	<script>document.getElementById('header-boilerplate').innerHTML = bp_appHeader('../../../shared/images/world.gif','Consonant-vowel generator', '');</script>
</header>

<!--h1>Font lister</h1-->

<aside class="sidebar">

<div style="font-size: 90%; margin-bottom: 2em; font-weight: bold;">
<span>Set font to:</span><br>
<label><input id="font" type="text" onChange="changeFontFamily(this.value)" style="background-color: #e8d9c5; border: 1px solid #aaa; padding: 3px; font-size: 120%;"/></label><br>
<span>Font size:</span><br>
<input id="fontSizeSlider" type="range" min="10" max="200" step="1" value="24"  oninput="changeFontSize(this.value)" style="width:100%;">
</div>


<div style="font-size: 90%; margin-bottom: 2em; font-weight: bold;">
<p>Choose a preset: <select id="preset" onChange="applyPreset(this.value)">
<option value=":">None</option>
<option value="bali">Balinese</option>
<option value="batk">Batak</option>
<option value="beng">Bengali</option>
<option value="deva">Devanagari</option>
<option value="gujr">Gujarati</option>
<option value="guru">Gurmukhi</option>
<option value="java">Javanese</option>
<option value="miao">Miao</option>
<option value="mlym">Malayalam</option>
<option value="mymr">Myanmar</option>
<option value="newa">Newa</option>
<option value="orya">Odia</option>
<option value="rjng">Rejang</option>
<option value="sinh">Sinhala</option>
<option value="sund">Sundanese</option>
<option value="tavt">Tai Viet</option>
</select>
</p></div>


</aside>

 

<div style="display: flex; flex-direction: row; flex-wrap: wrap; margin-inline-start: 7.5%; justify-content: space-between; width:60%;">
<div style="font-weight: bold; width: 48%;">Consonants:<br><input type="text" id="consonants" placeholder="Space-separated list." style="width: 100%;"></div>
<div style="font-weight: bold; width: 48%;">Vowels:<br><input type="text" id="vowels" placeholder="Space-separated list." style="width: 100%;"></div>
</div>

<p style="font-weight: bold;">Exclude: 
<input type="text" id="exclusions" placeholder="Space-separated list of pairs to exclude."></p>
<p style="font-weight: bold;">Highlight: 
<input type="text" id="highlights" placeholder="Space-separated list of pairs to exclude."></p>

<div id="preview"></div>

<div style="display: flex; flex-direction: row; flex-wrap: nowrap; margin-inline-start: 7.5%; margin-inline-end: 30%; width: 60%;">
<div style="font-weight: bold; flex:4;" id="parkingdiv">
Parking lot: &nbsp; &nbsp; <button onclick="showInUniView(document.getElementById('parkingLot').value); return false;">Show in UniView</button><br>
<textarea id="parkingLot" placeholder="Click on a cluster to save it here." style="font-weight: normal;font-family: raleway, sans; width: 100%;"></textarea>
</div>
<div style="flex:1; text-align: end;"><button id="submit" onClick="generate(document.getElementById('consonants').value, document.getElementById('vowels').value)">GO</button></div>
</div>



<table id="theTable">
<thead>
<tr><th class="second tipHead" colspan="2" style="text-align: start;">Usage tips:</th></tr>
</thead>
<tbody class="tipBody">
<tr>
<th class="second tips"><p>General operation</p></th>
<td><p class="tips">Add a space-separated list of consonants to the 'Consonants' field, and a space-separated list of vowels  to the 'vowels' field. You'll want to see results for a particular font, so type the name of the font in the field just above.</p>
<p class="tips">As you mouse over a table cell, the components of that cell will be shown in the top right corner of the page. This is particularly useful if your table is so large that you can no longer see the column or row headings.</p></td>
</tr>
<tr>
<th class="second tips"><p>Presets</p></th>
<td><p class="tips">Alternatively, select a script to show a basic set of combinations for that script. (The list will be added to in due course.)</p></td>
</tr>
<tr>
<th class="second tips"><p>Parking lot</p></th>
<td><p class="tips">If you click on a cell in the rendered list, it will be added to the parking lot area. You may want to do this for items you want to pick out for discussion or illustration. The items will all be space-separated.</p>
<p class="tips">You can view the contents of the parking lot character by character by clicking on the Show in UniView button.</p></td>
</tr>
<tr><th class="second tips"><p>Using exclusions</p></th><td>
<p class="tips">You can use the exclusion list to prevent results being displayed for certain cells.  It's a low tech approach to removing phonetic sequences that don't actually create conjuncts for the orthography being tested.</p>
<p class="tips">You need to add a space-separated list of (unwanted) conjunct forms to the input field labelled 'Exclusions'. You could create this list in a number of ways. One way might be to display the full set of conjuncts, and click on all the unwanted combinations. This will add those combinations to the parking lot. If you then save the contents of the parking lot, when you are done, you can copy that set back to the 'Exclusions' field whenever needed. It may be a bit laborious to create the list, but you only need to do it once.</p></td></tr>
<tr><th class="second tips"><p>Highlights</p></th><td>
<p class="tips">Add a space-separated list of consonant-vowel combinations here, and they will be highlighted in the matrix below.</p>
<p class="tips">If you have collected items in the parking lot, you could copy them here and press GO and you'll see what you've so far picked.</p></td></tr>
<tr>
<th class="second tips"><p>Parameters in the URL</p></th>
<td><p class="tips">The following parameters can be passed to the page via the URL: vowels, consonants, exclusions, fonts. This allows you to show someone else a set of conjuncts you are interested in.</p></td>
</tr>
</tbody>
</table>
<div class="smallprint"><span id="version">See <a target="_blank" href="https://github.com/r12a/scripts/commits/gh-pages/fontlist/index.html">recent changes</a>. &nbsp;тАв&nbsp; Make a <a href="https://github.com/r12a/scripts/issues/new?title=%5Bfontlist%5D%20TITLE_GOES_HERE&amp;body=Comment%20on%20http%3A%2F%2Fr12a.github.io%2Fscripts%2Ffontlist%2F%0A%0A" target="_blank">comment</a>. &nbsp;тАв&nbsp; Licence <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC-By</a> ┬й <a href="mailto:r12a@w3.org">r12a</a>.</span></div>



<script>

var presets = {
"bali":"смз смй смЮ смв смд смЯ сма смШ смЪ смЫ смУ смХ смФ смзсм┤ смпсм┤ см▒ смЪсм┤ смУсм┤ смХсм┤ см│см┤ смЧсм┤ см│ смл смж смЧ смЬ смп смн смо смм:см╢ см╖ см╕ см╣ см╛ снА снВ снГ см╡ см┐ снБ см║ см╗",
"batk":"спЗ спИ спЕ спЖ спЦ спЧ спС спВ спГ спДспж спО спП спб спЪспж спР спШ спЩ спЪ спД спА спМ спВ спФ спХ спЙ спК спа спЭ спЛ спМ спН спТ спУ спЮ спЯ спЫ спЬ:спк спл спо спп спм спй спз спи спн спи спм спйспи",
"beng":"ржк ржм ржл ржн ржд ржж рже ржз ржЯ ржб ржа ржв ржЪ ржЬ ржЫ ржЭ ржХ ржЧ ржЦ ржШ рж╢ рж╖ рж╕ рж╣ ржо ржи ржг ржЮ ржЩ рж░ ржбрж╝ ржврж╝ рж▓ ржп ржпрж╝:рж┐ рзА рзБ рзВ рзЗ рзЛ рж╛ рзМ рзИ рзГ рзД рзв рзг",
"deva":"рдХ рдЦ рдЧ рдШ рдЩ рдЪ рдЫ рдЬ рдЭ рдЮ рдЯ рда рдб рдв рдг рдд рде рдж рдз рди рдк рдл рдм рдн рдо рдп рд░ рд▓ рд╡ рд╢ рд╖ рд╕ рд╣ рдХрд╝ рдЦрд╝ рдЧрд╝ рдй рдбрд╝ рдврд╝ рд▒ рдпрд╝ рд│ рд┤ рдлрд╝ рдЬрд╝ ре╣ ре║:реХ рд╛ рд┐ реА реБ реВ реЦ реЧ реГ реД рев рег реЕ реЖ реЗ реИ реЙ реК реЛ реМ реП рд║ рд╗ реО",
"gujr":"ркк ркм ркн ркд рке ркж ркз ркЪ ркЫ ркЬ ркЭ ркЯ рка ркб ркв ркХ ркЦ ркЧ ркШ ркл рк╕ рк╢ рк╖ рк╣ рко рки ркЮ ркг ркЩ рк╡ рк░ рк▓ рк│ ркп ркХрлНрк╖ ркЬрлНркЮ:рк┐ рлА рлБ рлВ рлЗ рлЛ рлЙ рлЕ рк╛ рлИ рлМ",
"guru":"рик рим рин рил рид риж риз рие риЪ риЬ риЭ риЫ риЯ риб рив риа риХ риЧ риШ риЦ рилри╝ ри╕ ри╕ри╝ риЦри╝ ри╣ ри╡ риЬри╝ риЧри╝ рио рии риЮ риг риЩ рип ри░ рйЬ ри▓ ри▓ри╝:рйА ри┐ рйВ рйБ рйЗ рйЛ рйИ рйМ ри╛",
"java":"ъже ъжз ъжж ъжи ъжа ъжв ъжб ъжХ ъжЧ ъжЦ ъжЫ ъжЭ ъжП ъжТ ъжС ъжУ ъж▒ ъжп ъж▓ ъжй ъжд ъжЪ ъжФ ъжЯ ъжШ ъжо ъжл ъжЙ ъжн ъжК ъжк:ъж╢ ъж╕ ъж║ ъж║ъж┤ ъж╝ ъж┤ ъж║ъж┤",
"miao":"ЁЦ╝А ЁЦ╝К ЁЦ╝О ЁЦ╝Ю ЁЦ╝б ЁЦ╝╖ ЁЦ╝о ЁЦ╝Ъ ЁЦ╝З ЁЦ╝И ЁЦ╝║ ЁЦ╝╗ ЁЦ╝╜ ЁЦ╝│ ЁЦ╝╡ ЁЦ╝и ЁЦ╝ж ЁЦ╝Д ЁЦ╝Р ЁЦ╝г ЁЦ╜В ЁЦ╝Ц ЁЦ╝Ш ЁЦ╜Г:ЁЦ╜б ЁЦ╜╖ ЁЦ╜к ЁЦ╜▒ ЁЦ╜╡ ЁЦ╜Ь ЁЦ╜Э ЁЦ╜Щ ЁЦ╜│ ЁЦ╜Ф ЁЦ╜и ЁЦ╜в ЁЦ╜д ЁЦ╜ж ЁЦ╜м ЁЦ╜Я ЁЦ╜а ЁЦ╜║ ЁЦ╜╣ ЁЦ╜Ч ЁЦ╜Ш ЁЦ╜╗",
"mlym":"р┤к р┤м р┤л р┤н р┤д р┤ж р┤е р┤з р┤Ъ р┤Ь р┤Ы р┤Э р┤Я р┤б р┤в р┤а р┤Х р┤Ч р┤Ц р┤Шр┤╡ р┤╕ р┤╖ р┤╢ р┤╣ р┤о р┤и р┤Ю р┤г р┤Щ р┤░ р┤▒ р┤┤ р┤▓ р┤│ р┤п:р┤┐ р╡А р╡Б р╡В р╡Ж р╡З р╡К р╡Л р┤╛ р╡И р╡Ч р╡М р╡Г",
"mymr":"сАХ сАЧ сАЦ сАШ сАР сАТ сАС сАУ сАЛ сАН сАМ сАО сАА сАВ сАБ сАГ сАЕ сАЖ сАЗ сАИ сАЮ сА┐ сАЯ сАЩ сАФ сАП сАК сАЙ сАД сАЭ сАЫ сАЬ сАЪ сААсА╗ сААсА╝ сААсА╜ сААсА╛ сААсА╣сАЬ:сАн сАо сАп сА░ сА▒ сАнсАп сА▓ сАЪсА║ сА▒сАм сА▒сАл сА▒сАмсА║ сА▒сАлсА║ сАм сАл",
"newa":"ЁСРе ЁСРз ЁСРж ЁСРи ЁСРЯ ЁСРб ЁСРа ЁСРв ЁСРЪ ЁСРЬ ЁСРЫ ЁСРЭ ЁСРФ ЁСРЦ ЁСРХ ЁСРЧ ЁСРО ЁСРР ЁСРП ЁСРС ЁСР│ ЁСР▒ ЁСР▓ ЁСР┤ ЁСРй ЁСРг ЁСРЮ ЁСРШ ЁСРТ ЁСРк ЁСРд ЁСРЩ ЁСРУ ЁСР░ ЁСР┤ЁССВЁСР░ ЁСРм ЁСРн ЁСРо ЁСРп ЁСРл ЁСР┤ЁССВЁСРл ЁСРОЁССВЁСР▓ ЁСРЦЁССВЁСРШ:ЁСР╢ ЁСР╖ ЁСР╕ ЁСР╣ ЁСР╛ ЁССА ЁСР╡ ЁСР┐ ЁССБ ЁСР║ ЁСР╗ ЁСР╝ ЁСР╜",
"orya":"рмХ рмЦ рмЧ рмШ рмЩ рмЪ рмЫ рмЬ рмЭ рмЮ рмЯ рма рмб рмв рмг рмд рме рмж рмз рми рмк рмл рмм рмн рмо рмп рм░ рм▓ рм│ рм╡ рм╢ рм╖ рм╕ рм╣ рмбрм╝ рмврм╝ рнЯ рн▒:рм╛ рм┐ рнА рнБ рнВ рнГ рнД рнЗ рнИ рнЛ рнМ",
"rjng":"ъд╢ ъд╖ ъд│ ъд┤ ъд░ ъд▒ ъд╣ ъд║ ъеВ ъеД ъеГ ъеЕ ъд╝ ъеБ ъд╕ ъд╡ ъд╗ ъд▓ ъеА ъд╜ ъд╛ ъд┐:ъеЗ ъеИ ъеЙ ъеЛ ъеЖ ъеО ъеК ъеН ъеМ",
"sinh":"р╢Ъ р╢Ы р╢Ь р╢Э р╢Ю р╢Я р╢а р╢б р╢в р╢г р╢д р╢з р╢и р╢й р╢к р╢л р╢м р╢н р╢о р╢п р╢░ р╢▒ р╢┤ р╢╡ р╢╢ р╢╖ р╢╕ р╢╣ р╢║ р╢╗ р╢╜ р╖Е р╖А р╖Ж р╖Б р╖В р╖Г р╖Д:р╖П р╖Р р╖С р╖Т р╖У р╖Ф р╖Ц р╖Щ р╖Ъ р╖Ы р╖Ю р╖Ь р╖Э",
"sund":"соХ соШ соТ соУ соО соП соК соМ соЮ соа соЩ соФ соС соН соЭ соЫ соЬ соЪ:сод сое сож соз сой сои",
"tavt":"ъкЭ ъкЫ ъкЬ ъкЪ ъкЯ ъкЮ ъкХ ъкУ ъкФ ъкТ ъкЧ ъкЦ ъкЛ ъкК ъкН ъкМъкБ ъкЖ ъкА ъкЗ ъкГ ъкВ ъкб ъка ъкП ъкО ъкЕ ъкД ъкн ъкм ъкг ъкв ъкЩ ъкШ ъкС ъкР ъкЙ ъкИ ъкй ъки ъкз ъкж ъке ъкд ъкл ъкк ъкп ъко:ък▓ ък│ ък┤ък╣ ък╕ък╣ ък╖ ък╖ ък░ ък▒ ък╕ ък║ ък╛ ък╜ък╣ ък▒ък╡ ъкл",
}

function applyPreset (code) {
	var choice = presets[code].split(':')
	document.getElementById('consonants').value = choice[0]
	document.getElementById('vowels').value = choice[1]
	}


function generate (clist, vlist) {
	// get exclusion list

	exclusions = document.getElementById('exclusions').value.trim()
	exclusions = exclusions.replace(/\s+/g,' ')
	exclArray = exclusions.split(' ')
	const exclSet = new Set(exclArray)

	// get inclusion list
	var includes = false
	highlights = document.getElementById('highlights').value.trim()
	highlights = highlights.replace(/\s+/g,' ')
	inclArray = highlights.split(' ')
	if (inclArray.length > 0) includes = true
	const inclSet = new Set(inclArray)
	
	table = ''
	//virama = String.fromCodePoint('0x'+virama)
	
	//clist = clist.replace(' ','')
	//consonants = [...clist]
	clist = clist.replace(/\s+/g,' ')
	consonants = clist.split(' ')
	vlist = vlist.replace(/\s+/g,' ')
	vowels = vlist.split(' ')
	table += '<tr><th>&nbsp;</th>'
	for (v=0;v<vowels.length;v++) {
		table += '<th class="second">'+vowels[v]+'</th>'
		}
	table += '</tr>'
	for (let i=0;i<consonants.length;i++) {
		table += '<tr><th>'+consonants[i]+'</th>'
		for (j=0;j<vowels.length;j++) {
			if (includes) {
				if (inclSet.has(consonants[i]+vowels[j])) {
					table += '<td class="highlighted" onmouseover="document.getElementById(\'preview\').textContent=\''+consonants[i]+'+'+vowels[j]+' = '+consonants[i]+vowels[j]+'\'">'
					if (! exclSet.has(consonants[i]+vowels[j])) table += consonants[i]+vowels[j]
					table += '</td>'
					}
				else {
					table += '<td onmouseover="document.getElementById(\'preview\').textContent=\''+consonants[i]+'+'+vowels[j]+' = '+consonants[i]+vowels[j]+'\'">'
					if (! exclSet.has(consonants[i]+vowels[j])) table += consonants[i]+vowels[j]
					table += '</td>'

					}
				}

			else {
				table += '<td onmouseover="document.getElementById(\'preview\').textContent=\''+consonants[i]+vowels[j]+':'+consonants[i]+'+'+vowels[j]+'\'">'
				if (! exclSet.has(consonants[i]+vowels[j])) table += consonants[i]+vowels[j]
				table += '</td>'
				}
			}
		table += '</tr>'
		}
	document.getElementById('theTable').innerHTML = table
	var cells = document.querySelectorAll('td')
	for (var i=0;i<cells.length; i++) cells[i].addEventListener('click', saveForReview)
	}


function changeFontFamily ( newFont ) {
	document.getElementById( 'theTable' ).style.fontFamily = newFont
	var tds = document.getElementById( 'theTable' ).querySelectorAll('td')
	for (var i=0;i<tds.length;i++) tds[i].style.fontFamily = newFont
	document.getElementById( 'preview' ).style.fontFamily = newFont
	}

function changeFontSize ( newSize ) {
	document.getElementById( 'theTable' ).style.fontSize = newSize + 'px'
	//document.getElementById( 'preview' ).style.fontSize = newSize + 'px'
	}

function saveForReview ( evt ) {
	parkingLot = document.getElementById('parkingLot')
	parkingLot.value += evt.target.textContent + ' '
	}

function showInUniView (chars) {
	var uniview = window.open('/uniview/?charlist='+ encodeURIComponent(chars.trim()), 'uniview') 
	}




// check for parameters and take appropriate action
parameters = location.search.split('&')
parameters[0] = parameters[0].substring(1)
parametersFound = false
for (var p=0;p<parameters.length;p++) {
	pairs = parameters[p].split('=');
	if (pairs[0] == 'consonants') { if (pairs[1]) { document.getElementById('consonants').value = decodeURIComponent(pairs[1]); parametersFound = true } }
	if (pairs[0] == 'virama') { if (pairs[1]) { document.getElementById("virama").value = decodeURIComponent(pairs[1]); parametersFound = true } }
	if (pairs[0] == 'exclusions') { if (pairs[1]) { document.getElementById("exclusions").value = decodeURIComponent(pairs[1]); parametersFound = true } }
	if (pairs[0] == 'highlights') { if (pairs[1]) { document.getElementById("highlights").value = decodeURIComponent(pairs[1]); parametersFound = true } }
	if (pairs[0] == 'preset') { if (pairs[1]) { document.getElementById("preset").value = decodeURIComponent(pairs[1]); applyPreset(pairs[1]); parametersFound = true } }
	if (pairs[0] == 'font') { if (pairs[1]) { document.getElementById("font").value = decodeURIComponent(pairs[1]) } }
	}
if (parametersFound) generate(document.getElementById('consonants').value, document.getElementById('vowels').value)
</script>
</body>
</html>
