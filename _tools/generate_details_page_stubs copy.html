<!DOCTYPE html>
<html lang="en-GB">

<head>
<meta charset="utf-8"/>
<title>Get new character blocks</title>
<meta name="description" content="Generate character sections for block doc."/>

<link rel="stylesheet" href="local.css" type="text/css" />

<script src="../../uniview/descriptions.js"></script> 
<script src="../../uniview/u.js"></script> 
</head>

<body>
<h1>Generate details page stubs</h1>
<p>Produces stubs for codepoint descriptions in XX-details pages.</p>
<p>Input is a space-separated list of characters, generated by UniView.</p>

<p><textarea id="listin" placeholder="Add a list of characters here." style="height:400px;width:100%;"></textarea></p>

<p>
<label> Bicameral: <input type="checkbox" id="bicameral"/></label>
<label> Language: <input type="text" id="lang" style="width: 3em;"/></label>
<label> Direction: <input type="text" id="dir" style="width: 3em;"/></label>
<label> Add letter: <input type="checkbox" id="letter" checked></label>

<button style="font-size: 150%;" onClick="bicameral=false; 
if(document.getElementById('bicameral').checked) bicameral = true; 
lang = document.getElementById('lang').value;
dir = document.getElementById('dir').value;
document.getElementById('out').value = makeListFromChars(document.getElementById('listin').value, bicameral, lang, dir); 
document.getElementById('out').select()">Go</button>
</p>

<textarea id="out" style="height:400px;width:100%;"></textarea>


<p>Template for refs:</p>
<pre>
&lt;p class="ref">&lt;a href="#refs">General sources&lt;/a>:
   &lt;a href=&quot;block#refs&quot; target="_blank"&gt;Daniels&lt;/a&gt;, 
   &lt;a href="http://www.unicode.org/versions/latest/ch07.pdf#Armenian" target="_blank">Unicode&lt;/a>, &nbsp;
   &lt;a href="https://en.wikipedia.org/wiki/Armenian_alphabet" target="_blank">Wikipedia&lt;/a> &nbsp;
&lt;/p></pre>
   
   
   <p>Enter  code for general references here and they will be added.</p>
<textarea id="refs" style="height:200px;width:100%;"></textarea>



<div class="smallprint"><span id="version">First published  3 Feb 2008.  This version <span id="version-info"> 
  <!-- #BeginDate format:IS1m -->2021-03-07  7:14<!-- #EndDate --> 
</span> GMT. &nbsp;&bull;&nbsp; Copyright <a href="mailto:r12a@w3.org">r12a@w3.org</a>. Licence <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC-By</a>.</span></div>

<script>




function makeListFromChars (chars) {
	var charList = chars.split(' ')
        
    
	var out = ''
	
    for (var x=0; x<charList.length; x++) {
        if (charList[x] == '') continue
        var items = charList[x].split('\t')
        
        // get code point value, converting escapes if necessary
        if (items[0].includes('&#x')) {
            items[0] = items[0].replace('&#x','').replace(';','')
            i = parseInt(items[0],16)
            }
		else i = items[0].codePointAt(0)
		console.log('i',i, 'items',items)

		if (U[i]) {                 
			var hex = i.toString(16).toUpperCase()
			while (hex.length < 4) hex = '0' + hex
			console.log(hex)
			var dbrecord = U[i].split(';')
			var cpName = dbrecord[1]
			
			out += "'\\u{"+hex+"}': `\n"
			out += '<p class="insertTranscription">&#x'+hex+';</p>\n'
			out += '`,\n\n'
			}
		}
	return out
	}

</script>

</body>
</html>
